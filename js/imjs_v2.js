var Utils={explode:function(c,e,a){var f={0:""};if(arguments.length<2||typeof arguments[0]==="undefined"||typeof arguments[1]==="undefined"){return null}if(c==""||c==false||c==null){return false}if(typeof c==="function"||typeof c==="object"||typeof e==="function"||typeof e==="object"){return f}if(c==true){c="1"}if(!a){return e.toString().split(c.toString())}else{var g=e.toString().split(c.toString());var d=g.splice(0,a-1);var b=g.join(c.toString());d.push(b);return d}},analyseURLRequestSource:function(){var f=$("#webimSource").attr("src");if(f.indexOf("?")>0){var d=this.explode("?",f);var e=this.explode("&",d[1]);for(var b=0;b<e.length;b++){var a=this.explode("=",e[b]);if(xiaozhuIM.hasOwnProperty(a[0])){xiaozhuIM[a[0]]=a[1]}}}var c=xiaozhuIM.dm.split(".").length;xiaozhuIM.topdomain=xiaozhuIM.dm.split(".")[c-2]+"."+xiaozhuIM.dm.split(".")[c-1]},checkIfIE6Browser:function(){if($.browser.msie&&$.browser.version==="6.0"){isIE6=true}else{isIE6=false}},setCookie:function(b,d,a){var c=new Date();if(a!=null){c.setTime(c.getTime()+(a*1000*3600*24))}document.cookie=b+"="+escape(d)+";domain="+topLevelDomain+((a==null)?"":("; expires="+c.toGMTString()))+"; path=/"},getCookie:function(b){var d="",a="";var c=b+"=";if(document.cookie.length>0){d=document.cookie.indexOf(c);if(d!=-1){d+=c.length;a=document.cookie.indexOf(";",d);if(a==-1){a=document.cookie.length}return unescape(document.cookie.substring(d,a))}else{return""}}},insertAtCursor:function(e,d){if(document.selection){e.focus();sel=document.selection.createRange();sel.text=d;sel.select()}else{if(e.selectionStart||e.selectionStart=="0"){var c=e.selectionStart;var b=e.selectionEnd;var a=e.scrollTop;e.value=e.value.substring(0,c)+d+e.value.substring(b,e.value.length);if(a>0){e.scrollTop=a}e.focus();e.selectionStart=c+d.length;e.selectionEnd=c+d.length}else{e.value+=d;e.focus()}}},getCurrentTime:function(){return Math.floor(new Date().getTime()/1000)},getTimestamp2Second:function(){return Math.floor(this.getTimestamp()/1000)},getTimestamp:function(){return new Date().getTime()},getTimeout4Msg:function(){return this.getTimestamp2Second()+10},getFormatTime:function(b,a){if(this.isEmpty(a)){a="MM-dd hh:mm:ss"}return new Date(b).format(a)},isEmpty:function(a){if(!a){return true}if(a.length===0){return true}if("undefined"==typeof a){return true}return false},isNullArray:function(a){if(a=="[]"){return false}if(!a){return true}if("undefined"==typeof a){return true}return false},getCuttedStringOfSpecificLength:function(d,a){if(!d){return""}if(d.length<=a){return d}var b=0;var e="";for(var c=0;c<d.length;c++){if(d.charCodeAt(c)>128){b++}else{b+=1/2}if(Math.ceil(b)>a){b=a}e+=d.charAt(c);if(b>=a){return e+"..."}}return e},debug:function(a){if(DEBUG&&window.console){console.log(a)}},connectString:function(c,b,a){return c+a+b},dumpObj:function(g,a,d,f){var i=10;if(f>i){return d+a+": <Maximum Depth Reached>\n"}if(typeof g=="object"){var b=null;var c=d+a+"\n";d+="\t";for(var j in g){try{b=g[j]}catch(h){b="<Unable to Evaluate>"}if(typeof b=="object"){c+=dumpObj(b,j,d,f+1)}else{c+=d+j+": "+b+"\n"}}this.debug(c)}else{this.debug(g)}}};Date.prototype.format=function(b){var c={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};if(/(y+)/.test(b)){b=b.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))}for(var a in c){if(new RegExp("("+a+")").test(b)){b=b.replace(RegExp.$1,RegExp.$1.length==1?c[a]:("00"+c[a]).substr((""+c[a]).length))}}return b};